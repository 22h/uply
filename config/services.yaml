# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
parameters:
    locale: 'en'

services:
    _defaults:
        autowire: true
        autoconfigure: false
        public: false
        bind:
            $apiKey: '%env(UPLY_API_KEY)%'
            $defaultMailFrom: '%env(MAIL_FROM)%'
            $defaultMailTo: '%env(MAIL_TO)%'
            $defaultDiscordWebHook: '%env(DISCORD_WEBHOOK)%'

    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/*'
        exclude: '../src/{Entity,Migrations,Tests}'

    App\Command\MonitorCommand:
        tags:
            - { name: 'console.command' }
        calls:
            - [setLogger, ['@monolog.logger.monitor']]

    App\Monitor\UnitParameterBagFactory:

    App\Monitor\Event\NotifyEventDispatcher:

    App\Monitor\UnitServiceChain:

    App\Repository\EventRepository:
        factory: ['@doctrine.orm.default_entity_manager', getRepository]
        arguments:
            - App\Entity\Event

    App\Service\Curl\CurlRequestFactory:

    App\Service\HttpHeader:

    App\Service\EventFactory:

    App\Service\EventService:
        public: true

    App\Service\MonitoringLoopService:

    App\Notification\MailNotification:

    App\Notification\DiscordNotification:

    App\Controller\StatusController:
        tags:
            - 'controller.service_arguments'

